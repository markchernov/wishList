<!DOCTYPE html>
<html lang="en-US">
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

<body>
    <div ng-app="test" ng-controller="myCtrl">
        <p>Create a new Wishlist:</p>
        Name of Wish List
        <input type="text" ng-model="name">
        <br> Description:
        <input type="text" ng-model="description">
        <br>
        <button ng-click="createWishList()"> Create Wishtlist</button>
        <br>
        <br>
        <select size=5 ng-options="x as x.name for x in wishListArray" ng-model="selected">
        </select>
        WishList Info: {{wishilist1.name + "'s " + wishilist1.description}} item selected : {{selected}}
    </div>
    <script>
        var app = angular.module('test', []);
        app.controller('myCtrl', function($scope, $http) {

            function WishList(name, description) {
                var self = this;

                self.name = name;
                self.description = description;
            }

            $http.get(
                '/db/find',
                null, null
            ).then(function successCallback(response) {
                console.log('in success call back: ');
                console.log(response);
                if (response.status === 200) {

                    $scope.wishListArray = [];


                    for (var pos in response.data) {
                        
                        var obj = response.data[pos];

                        $scope.wishListArray.push(new WishList(obj.name, obj.description))

                    }


                }
            }, function errorCallback(response) {
                console.log('in error call back: ' + response);
            });



            $scope.createWishList = function() {
                $http.post(
                    '/db/insert', {
                        name: $scope.name,
                        description: $scope.description
                    }, null
                ).then(function successCallback(response) {
                    console.log('in success call back: ');
                    console.log(response);

                    $scope.wishListArray.push(new WishList($scope.name, $scope.description));
                }, function errorCallback(response) {
                    console.log('in error call back: ' + response);
                });



            };






        });

    </script>
</body>

</html>
